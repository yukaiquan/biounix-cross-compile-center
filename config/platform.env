#!/bin/bash
# config/platform.env

# 如果 OS_TYPE 已经由 Workflow 传进来了，就别改它
if [ -z "$OS_TYPE" ]; then
    case "$(uname -s)" in
        Darwin*)  export OS_TYPE="macos" ;;
        MSYS*|MINGW*) export OS_TYPE="windows" ;;
        *)        export OS_TYPE="linux" ;;
    esac
fi

if [ -z "$ARCH_TYPE" ]; then
    case "$(uname -m)" in
        x86_64|amd64) export ARCH_TYPE="x64" ;;
        arm64|aarch64) export ARCH_TYPE="arm64" ;;
        *)             export ARCH_TYPE="x64" ;;
    esac
fi

# 统一设置后缀
[[ "$OS_TYPE" == "windows" ]] && export EXE_EXT=".exe" || export EXE_EXT=""
